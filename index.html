<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Model Viewer – With Play Button</title>

  <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.0.0/model-viewer.min.js"></script>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#ffffff; --ink:#202326; --body:#555a5f; --rule:#a2a7ad;
      --accent:#0a7cff;
    }
    *{box-sizing:border-box;}
    html,body{height:100%;margin:0;}
    body{background:var(--bg);color:var(--ink);font-family:Inter, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;}

    header{padding:18px 24px; display:flex; align-items:center; justify-content:space-between;}
    .controls{display:flex; gap:12px;}
    .btn{
      appearance:none; border:0; background:var(--accent); color:#fff;
      padding:10px 14px; border-radius:10px; font-size:14px; font-weight:600; cursor:pointer;
    }

    .stage{
      min-height:calc(100vh - 64px);
      display:grid; grid-template-columns:1fr minmax(340px,480px) 1fr;
      align-items:center; gap:32px; padding:0 48px 40px;
    }
    model-viewer{width:100%; height:min(78vh, 900px); background:transparent; --poster-color:transparent;}

    .info{
      justify-self:center; width:min(520px, 90%); background:#fff; border-radius:30px;
      padding:36px 44px;
      box-shadow:0 1px 0 rgba(0,0,0,.05), 0 12px 60px rgba(0,0,0,.06);
    }
    .kicker{
      margin:0 0 12px; font-size:14px; font-weight:700; letter-spacing:.06em; text-transform:uppercase;
      color:var(--ink); display:flex; align-items:center; gap:12px;
    }
    .rule{flex:1; height:1px; background:var(--rule); opacity:.85;}
    .copy{margin:10px 0 0; font-size:15px; line-height:1.7; color:var(--body);}
    .section + .section{margin-top:28px;}

    @media (max-width:1100px){
      .stage{grid-template-columns:1fr; gap:18px; padding:0 16px 28px;}
      model-viewer{order:2; height:64vh;}
      .info{width:100%; padding:28px 22px; border-radius:22px;}
    }
  </style>
</head>
<body>
  <header>
    <h1 style="margin:0;font-size:16px;">3D Model Viewer</h1>
    <div class="controls">
      <button id="playAnimation" class="btn" type="button">Play Animation</button>
    </div>
  </header>

  <main class="stage">
    <!-- Left block -->
    <aside class="info" aria-label="Left product benefits">
      <div class="section">
        <h3 class="kicker">Hydration that lasts.<span class="rule"></span></h3>
        <p class="copy">Locks in moisture so your skin stays soft and dewy all day.</p>
      </div>
      <div class="section">
        <h3 class="kicker">Glow from within.<span class="rule"></span></h3>
        <p class="copy">Brightens dull skin, evens tone, and leaves a natural radiance.</p>
      </div>
    </aside>

    <!-- Center model -->
    <model-viewer id="viewer"
      src="https://swaroop36.github.io/xenreality.github.io/zuri_gold.glb"
      ar camera-controls touch-action="pan-y"
      environment-image="https://modelviewer.dev/shared-assets/environments/neutral.hdr"
      skybox-image="https://raw.githubusercontent.com/swaroop36/xenreality.github.io/cd658672d3e06d30acc82e6664dc38c4fdfb5298/white_background.jpg"
      tone-mapping="aces" exposure="1.0" field-of-view="70deg"
      camera-orbit="0deg 75deg 25m" min-camera-orbit="auto auto 5m" max-camera-orbit="auto auto 50m"
      autoplay="false" alt="3D model viewer" shadow-intensity="0">
    </model-viewer>

    <!-- Right block -->
    <aside class="info" aria-label="Right product benefits">
      <div class="section">
        <h3 class="kicker">Effortless results.<span class="rule"></span></h3>
        <p class="copy">Our mess‑free applicator delivers effortless results in every swipe.</p>
      </div>
      <div class="section">
        <h3 class="kicker">Powered by a breakthrough formula<span class="rule"></span></h3>
        <p class="copy">A game‑changing blend that elevates your skin with every use.</p>
      </div>
    </aside>
  </main>

  <script>
    const viewer = document.getElementById('viewer');
    const playBtn = document.getElementById('playAnimation');

    viewer.autoplay = false;

    function stopAtEnd(){
      try{
        viewer.pause?.();
        const end = viewer.duration ?? viewer.endTime;
        if (Number.isFinite(end)) viewer.currentTime = end;
      }catch(e){}
    }

    let rafId=null;
    function watchForWrap(){
      cancelAnimationFrame(rafId);
      let last = viewer.currentTime ?? 0;
      const end = viewer.duration ?? viewer.endTime;
      const tick = () => {
        const t = viewer.currentTime ?? 0;
        if (Number.isFinite(end) && t < last && last > 0){ stopAtEnd(); return; }
        last = t; rafId = requestAnimationFrame(tick);
      };
      rafId = requestAnimationFrame(tick);
    }
    function cancelWatch(){ cancelAnimationFrame(rafId); rafId=null; }

    viewer.addEventListener('finished', () => { cancelWatch(); stopAtEnd(); });

    playBtn.addEventListener('click', async () => {
      const firstAnim = viewer.availableAnimations?.[0] ?? null;
      if (!firstAnim) return;
      viewer.pause?.();
      viewer.animationName = firstAnim;
      viewer.currentTime = 0;
      try { await viewer.play?.({ repetitions: 1 }); }
      catch { viewer.play?.(); }
      watchForWrap();
    });
  </script>
</body>
</html>
