<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Model Viewer â€“ Click to Reveal (Model + Button, Original Placement)</title>

  <!-- model-viewer -->
  <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.0.0/model-viewer.min.js"></script>

  <!-- Inter font -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --ink:#202326;
      --bg:#ffffff;
    }
    *{box-sizing:border-box;}
    html,body{height:100%;margin:0;}
    body{
      background:var(--bg);
      color:var(--ink);
      font-family:Inter, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    }

    /* Two-column grid: model centered, button column on the right */
    .stage{
      min-height:100vh;
      display:grid;
      grid-template-columns: 1fr minmax(420px, 560px) 1fr; /* left gutter | model | right gutter */
      align-items:center;
      gap:48px;
      padding:24px 48px 56px;
      position:relative;
    }

    /* Model in middle column with light backdrop */
    .model-wrap{
      grid-column: 2;
      position:relative;
      width:100%;
      height:min(78vh, 900px);
      display:grid; place-items:center;
      background:#eef0f5;
      border-radius:8px;
    }
    model-viewer{
      width:100%; height:100%;
      background:transparent; --poster-color:transparent;
    }

    /* Button column (right) */
    .button-col{
  grid-column: 3;               /* right column */
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;          /* keep it vertically centered */
}

/* Reveal button (desktop) */
.reveal{
  position: relative;           /* no absolute positioning */
  width:160px; 
  height:160px;
  border-radius:50%;
  border:2px solid #111;
  background:#fff;
  display:grid; 
  place-items:center;
  cursor:pointer;
  user-select:none;
  transition:transform .2s ease, box-shadow .2s ease, background .2s ease;
  z-index:3;
}
.reveal:hover{
  background:#f2f4f7;
  transform: translateY(-2px);  /* subtle lift only */
  box-shadow:0 12px 30px rgba(0,0,0,.12);
}
.reveal span{
  display:block; 
  width:80%; 
  text-align:center;
  font-size:12px; 
  font-weight:700; 
  letter-spacing:.06em; 
  line-height:1.2;
  color:#111; 
  text-transform:uppercase;
}

/* Mobile: stacked below model */
@media (max-width:1100px){
  .button-col{ 
    grid-column: 1; 
    height:auto; 
    display:flex; 
    justify-content:center; 
    margin-top:16px;
  }

  .reveal{
    width:140px; 
    height:140px;
  }
}
  </style>
</head>
<body>
  <main class="stage">
    <!-- Center model only -->
    <div class="model-wrap">
      <model-viewer id="viewer"
  src="https://github.com/swaroop36/xenreality.github.io/raw/6b69002b07e67dad8c1f6d0c76853b55fa178b49/2.glb"
  ar camera-controls touch-action="pan-y"
  style="background:#ffffff; --poster-color:#ffffff;"
  tone-mapping="aces" exposure="1.0" field-of-view="70deg"
  camera-orbit="0deg 75deg 1m" min-camera-orbit="auto auto 1m" max-camera-orbit="auto auto 20m"
  autoplay="false" alt="3D model viewer" shadow-intensity="0">
      </model-viewer>
    </div>

    <!-- Reveal button in the right area -->
    <div class="button-col">
      <button id="revealBtn" class="reveal" type="button" aria-label="Click to reveal">
        <span>CLICK TO REVEAL WHY</span>
      </button>
    </div>
  </main>

  <script>
    const viewer = document.getElementById('viewer');
    const revealBtn = document.getElementById('revealBtn');

    viewer.autoplay = false;

    function stopAtEnd(){
      try{
        viewer.pause?.();
        const end = viewer.duration ?? viewer.endTime;
        if (Number.isFinite(end)) viewer.currentTime = end;
      }catch(e){}
    }

    let rafId=null;
    function watchForWrap(){
      cancelAnimationFrame(rafId);
      let last = viewer.currentTime ?? 0;
      const end = viewer.duration ?? viewer.endTime;
      const tick = () => {
        const t = viewer.currentTime ?? 0;
        if (Number.isFinite(end) && t < last && last > 0){ stopAtEnd(); return; }
        last = t; rafId = requestAnimationFrame(tick);
      };
      rafId = requestAnimationFrame(tick);
    }
    function cancelWatch(){ cancelAnimationFrame(rafId); rafId=null; }
    viewer.addEventListener('finished', () => { cancelWatch(); stopAtEnd(); });

    // Play the first animation once when circle is clicked
    revealBtn.addEventListener('click', async () => {
      const firstAnim = viewer.availableAnimations?.[0] ?? null;
      if (!firstAnim) return;
      viewer.pause?.();
      viewer.animationName = firstAnim;
      viewer.currentTime = 0;
      try { await viewer.play?.({ repetitions: 1 }); }
      catch { viewer.play?.(); }
      watchForWrap();
    });
  </script>
</body>
</html>

